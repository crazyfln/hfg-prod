{% extends 'base.html' %}
{% block title %}
Search
{% endblock title %}
{% load static %}
{% block extra_head %}
<link href="{% static 'slider/css/slider.css' %}" rel="stylesheet">
{% endblock extra_head %}


{% block content %}
<div class="background-beige">
<div class="container padder-100">
    {% include 'snippets/searchbox.html' with form=form %}
    <div id="search-results ">
      {% for listing in object_list %}
        {% if forloop.counter0|divisibleby:"3" %}
          <div class="row">
        {% endif %}
        {% include 'snippets/listing_preview.html' with user=request.user facility=listing %}
        {% if forloop.counter|divisibleby:"3" or forloop.last %}
          </div>
        {% endif %}
        {% empty %}
        <center><h2 class='empty'>We are busy adding thousands of listing to our website. We’re sorry, your search didn’t return any of our currently listed communities. Our advisors can still help give us a call at 1(800) 434-0324.</h2></center>
      {% endfor %}
      {% if is_paginated %}
        <div class="pagination">
          <span class="page-links">
            {% if page_obj.has_previous %}
              <a href="?page={{ page_obj.previous_page_number }}{% for key,value in request.GET.items %}{% ifnotequal key 'page' %}&{{ key }}={{ value }}{% endifnotequal %}{% endfor %}" class="pagination-link">
                <button class="button-blue">PREVIOUS</button>
              </a>
            {% endif %}
            <span class="page-current">
              Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
            </span>
            {% if page_obj.has_next %}
              <a href="?page={{ page_obj.next_page_number }}{% for key,value in request.GET.items %}{% ifnotequal key 'page' %}&{{ key }}={{ value }}{% endifnotequal %}{% endfor %}" class="pagination-link">
                <button class="button-blue">NEXT</button>
              </a>
            {% endif %}
          </span>
        </div>
    {% endif %}
    </div>
</div>
</div>

{% endblock content %}
{% block body_media %}
  <script>
    min_val = $('#id_min_value').attr('value');
    if (min_val == undefined){
      min_val = {{ real_min_val }};
    }
    max_val = $('#id_max_value').attr('value');
    if (max_val == undefined){
      max_val = {{ real_max_val }};
    }

  </script>

{% endblock body_media %}
